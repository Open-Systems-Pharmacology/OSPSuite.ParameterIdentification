---
title: "Error calculation"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Error calculation}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

This article describes how the error for the minimization function is calculated 
in the PI package. The error is a measure of the difference between the
simulated results and observed data. Following error models are implemented:

- `lsq` - least squares error
- `m3` - extended least squares error considering the likelihood of observed data
being below quantification limit. Implementation based on DOI: 10.1023/a:1012299115260, 
in particular, equation 6 (the M3 method).

To specify which error model should be used in the PI, set the value of the method `targetFunctionType`
of the `PIConfiguration` object to the desired error model. The default error model is `lsq`.

```{r eval = FALSE}
piConfig <- PIConfiguration$new()
piConfig$targetFunctionType <- "lsq"
```

For each `PIOutputMapping`, the error is calculated between the simulated results 
and all observer data sets linked in the `PIOutputMapping` object. The total error is 
the sum of all errors for each `PIOutputMapping`.

Differences between when `PIOutputMapping$scaling` is `log` and `lin`.

## Details on lsq

## Details on M3
